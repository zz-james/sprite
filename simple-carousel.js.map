{"version":3,"file":"simple-carousel.js","sourceRoot":"","sources":["src/simple-carousel.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, CSSResultGroup} from 'lit';\nimport {\n  customElement,\n  property,\n  queryAssignedElements,\n  state,\n} from 'lit/decorators.js';\n\nimport {styleMap} from 'lit/directives/style-map.js';\n\nimport {\n  AnimationTuple,\n  SLIDE_LEFT_IN,\n  SLIDE_LEFT_OUT,\n  SLIDE_RIGHT_IN,\n  SLIDE_RIGHT_OUT,\n} from './constants';\n\nimport styles from './simple-carousel-css';\n\nimport './slide-button';\n\n@customElement('simple-carousel')\nexport class SimpleCarousel extends LitElement {\n  @state() private containerHeight = 0;\n  @property({type: Number}) slideIndex = 0;\n\n  // ::slotted psuedoclass selects insidr the slot (children)\n  static override styles?: CSSResultGroup | undefined = styles;\n\n  @queryAssignedElements()\n  private readonly slideElements!: HTMLElement[];\n\n  override firstUpdated() {\n    this.containerHeight = getMaxElHeight(this.slideElements);\n    this.initialiseSlide();\n  }\n\n  private initialiseSlide() {\n    for (let i = 0; i < this.slideElements.length; i++) {\n      if (i === this.slideIndex) {\n        showSlide(this.slideElements[i]);\n      } else {\n        hideSlide(this.slideElements[i]);\n      }\n    }\n  }\n\n  private changeSlide(offset: number) {\n    const slideCount = this.slideElements.length;\n    this.slideIndex =\n      (slideCount + ((this.slideIndex + offset) % slideCount)) % slideCount;\n  }\n\n  navigateToPrevSlide = () => {\n    // this.changeSlide(-1);\n    this.navigateWithAnimation(-1, SLIDE_RIGHT_OUT, SLIDE_LEFT_IN);\n  };\n\n  navigateToNextSlide = () => {\n    // this.changeSlide(1);\n    this.navigateWithAnimation(1, SLIDE_LEFT_OUT, SLIDE_RIGHT_IN);\n  };\n\n  private async navigateWithAnimation(\n    nextSlideOffset: number,\n    leavingAnimation: AnimationTuple,\n    enteringAnimation: AnimationTuple\n  ) {\n    const elLeaving = this.slideElements[this.slideIndex];\n    const leavingAnim = elLeaving.animate(\n      leavingAnimation[0],\n      leavingAnimation[1]\n    );\n    // change slide\n    this.changeSlide(nextSlideOffset);\n    const newSlideEl = this.slideElements[this.slideIndex];\n    showSlide(newSlideEl);\n    const enteringAnim = newSlideEl.animate(\n      enteringAnimation[0],\n      enteringAnimation[1]\n    );\n    await Promise.all([leavingAnim.finished, enteringAnim.finished]);\n    // hide old slide\n    hideSlide(elLeaving);\n  }\n\n  override render() {\n    const containerStyles = {\n      height: `${this.containerHeight}px`,\n    };\n\n    console.log(containerStyles);\n\n    return html`\n      <slide-button @click=${this.navigateToPrevSlide}><</slide-button>\n      <div id=\"container\" style=\"${styleMap(containerStyles)}\">\n        <slot></slot>\n      </div>\n      <slide-button @click=${this.navigateToNextSlide}>></slide-button>\n    `;\n  }\n}\n\nconst hideSlide = (el: HTMLElement) => {\n  el.classList.add('slide-hidden');\n};\n\nconst showSlide = (el: HTMLElement) => {\n  el.classList.remove('slide-hidden');\n};\n\nconst getMaxElHeight = (els: HTMLElement[]) => {\n  return Math.max(0, ...els.map((el) => el.getBoundingClientRect().height));\n};\n"]}